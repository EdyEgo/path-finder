<script lang="ts" setup>
import {ref , defineProps,onMounted,watchEffect} from 'vue'
import {useBoardData} from '../stores/boardData'
import {useOptions} from '../stores/options'

const boardStore = useBoardData()
const optionsStore = useOptions()

const props = defineProps<{
   indexColumn:number,
  indexRow:number
}>()

const clickModeStatus = ref()
// const contentColumnModeHTMLEntity = {
//   start:false,
  
//   target:'&#127919',
//   trap:'&#9762;',
//   weight:'&#9875;',
//   wall:'',
//   visited:'',
//   unvisited:'',

// } 

 watchEffect(() => {
   optionsStore.selectedMode
   clickModeStatus.value = optionsStore.selectedMode

 })



const stringedIndexColumn = props.indexColumn.toString()
const stringedIndexRow = props.indexRow.toString()
const columnIndex = ref('column-' + props.indexColumn.toString())
const columnAspect = ref<string>('')

onMounted(() => {

boardStore.createInitialRowWithColumnInfo(stringedIndexRow,stringedIndexColumn)

  watchEffect(() => {
 
   boardStore.$state.columnsInfo[stringedIndexRow][stringedIndexColumn].status// watch the status
    columnAspect.value  = boardStore.$state.columnsInfo[stringedIndexRow][stringedIndexColumn].status
 })

})




function changeColumnStatus(){
  // here we gonna look at the options too see what modude is selected(ex wall , blackHole/bomb)
  // and on click or on hover or on click keept pressed change the column object and add that style to  
  // the columnAspect 
 boardStore.changeColumnStatus(stringedIndexRow,stringedIndexColumn,clickModeStatus.value)

columnAspect.value = clickModeStatus.value
}




</script>

<template>
<!-- @mouseenter="changeColumnAspect" -->
  <td class=""  :class="[columnAspect,columnIndex]" @click="changeColumnStatus">
                   <div class="start" :class="columnAspect === 'start' ? '':'hidden'">
                   <svg width="1em" height="1em" viewBox="0 0 72 72"><path fill="#FCEA2B" d="M16.12 48.114c-3.158 3.163-4.652 7.56-3.97 11.688c4.128.676 8.522-.82 11.683-3.977c3.158-3.163 4.652-7.56 3.97-11.688c-4.128-.676-8.522.82-11.683 3.977z"></path><path fill="#61B2E4" d="M31.973 45.839a4.985 4.985 0 0 1-1.362 2.55a4.986 4.986 0 0 1-1.145.852a29.857 29.857 0 0 1 4.695 9.75c.71-.62 1.391-1.278 2.042-1.968a30.742 30.742 0 0 0 4.852-6.832a30.743 30.743 0 0 0 2.744-7.636c-3.729 1.955-7.772 3.077-11.826 3.284z"></path><path fill="#92D3F5" d="M14.923 35.749c-.69.65-1.347 1.33-1.97 2.038a29.864 29.864 0 0 1 9.761 4.679c.227-.414.51-.794.844-1.128a4.988 4.988 0 0 1 2.542-1.36c.21-4.05 1.336-8.09 3.292-11.814l.006-.011a30.762 30.762 0 0 0-7.64 2.743a30.746 30.746 0 0 0-6.835 4.853z"></path><path fill="#EA5A47" d="M34.821 20.747c-5.231 5.25-8.367 12.164-8.723 19.233a4.989 4.989 0 0 1 4.515 1.358a4.985 4.985 0 0 1 1.356 4.534c7.076-.361 13.992-3.503 19.242-8.74c6.712-6.723 9.885-16.067 8.434-24.84a26.146 26.146 0 0 0-5.292-.313c-7.174.292-14.21 3.45-19.532 8.767v.001zm10.249-.53a4.716 4.716 0 0 1 6.669 0a4.713 4.713 0 0 1 .002 6.668h-.001a4.717 4.717 0 0 1-6.67-6.667z"></path><path fill="#F1B31C" d="M26.538 52.037a14.471 14.471 0 0 1-3.007 2.562c-3.49 2.223-7.725 2.834-11.441 1.653c-.15 1.196-.13 2.391.06 3.55c4.128.676 8.522-.82 11.683-3.978a14.425 14.425 0 0 0 2.705-3.787z"></path><path fill="#D22F27" d="M26.204 38.687c-.033.428-.056.856-.068 1.283a4.985 4.985 0 0 1 5.833 5.901c7.075-.361 13.99-3.503 19.24-8.74a30.823 30.823 0 0 0 3.974-4.935a30.864 30.864 0 0 1-4.352 3.308c-7.558 4.71-16.694 5.892-24.628 3.183h.001z"></path><path d="M36.166-14.451z"></path><path fill="#61B2E4" d="M24.039 48.551c.87-.437 1.72-.918 2.55-1.438a31.73 31.73 0 0 0 6.63-5.555l.002-.003a31.73 31.73 0 0 0 4.733-6.912a.985.985 0 0 0 .105-.387c-3.399-.753-14.846 10.251-14.02 14.295z"></path><path d="M48.405 29.49c-3.276 0-5.941-2.664-5.941-5.94s2.665-5.938 5.941-5.938s5.941 2.664 5.941 5.939s-2.665 5.939-5.941 5.939zm0-9.899a3.964 3.964 0 0 0-3.96 3.96a3.964 3.964 0 0 0 3.96 3.96a3.964 3.964 0 0 0 3.96-3.96a3.964 3.964 0 0 0-3.96-3.96z"></path><path fill="none" stroke="#000" strokeLinecap="round" strokeLinejoin="round" strokeMiterlimit="10" strokeWidth="1.949" d="M20.653 45.063a14.377 14.377 0 0 0-4.533 3.05c-3.158 3.164-4.652 7.56-3.97 11.688c4.128.676 8.522-.82 11.683-3.977a14.374 14.374 0 0 0 3.053-4.532M14.923 35.749c-.69.65-1.347 1.33-1.97 2.038a29.864 29.864 0 0 1 9.761 4.679c.227-.414.51-.794.844-1.128a4.988 4.988 0 0 1 2.542-1.36c.21-4.05 1.336-8.09 3.292-11.814l.006-.011a30.762 30.762 0 0 0-7.64 2.743a30.746 30.746 0 0 0-6.835 4.853h0zm17.05 10.09a4.985 4.985 0 0 1-1.362 2.55a4.986 4.986 0 0 1-1.145.852a29.857 29.857 0 0 1 4.695 9.75c.71-.62 1.391-1.278 2.042-1.968a30.742 30.742 0 0 0 4.852-6.832a30.743 30.743 0 0 0 2.744-7.636c-3.729 1.955-7.772 3.077-11.826 3.284h0z"></path><path fill="none" stroke="#000" strokeLinecap="round" strokeLinejoin="round" strokeMiterlimit="10" strokeWidth="1.949" d="M31.83 43.345c.27.886.25 1.692.137 2.525c7.076-.362 13.993-3.504 19.243-8.742c6.71-6.721 9.884-16.063 8.435-24.834c-8.771-1.436-18.108 1.742-24.823 8.451c-5.232 5.251-8.368 12.164-8.724 19.234a4.979 4.979 0 0 1 2.77.239"></path><path fill="none" stroke="#000" strokeLinecap="round" strokeLinejoin="round" strokeMiterlimit="10" strokeWidth="1.949" d="M37.072 34.196h0a30.755 30.755 0 0 0-6.7 4.584a30.743 30.743 0 0 0-5.384 6.421a29.987 29.987 0 0 0-1.392 2.47"></path></svg>
                   </div>
                   <div class="target"  :class="columnAspect === 'target' ? '':'hidden'">
                   

                    <svg width="0.96em" height="1em" viewBox="0 0 256 267"><path fill="#1A1A1A" d="m213.218 64.45l-.018-.016l-38.93 14.169l7.188-40.778l.004-.023l-31.791-26.675l-.018-.016l-39 14.193l-.022.01l-7.193 40.8l-31.72-26.615l-.018-.015l-39 14.193l-.022.009l-7.207 40.872l-.004.023l31.737 26.632l-38.91 14.161l-.023.009l-7.206 40.87l-.006.024l31.793 26.677l.018.016L81.8 188.8l-7.188 40.776l-.004.023l31.793 26.677l.017.016l39-14.194l.023-.008l7.194-40.799l31.719 26.614l.018.016l39-14.193l.022-.01l7.207-40.872l.003-.022l-31.736-26.632l38.91-14.162l.022-.008l7.207-40.871l.005-.023l-31.794-26.68Zm-92.302 110.114l38.84-14.137l-7.177 40.705l-31.663-26.568Zm14.241-81.724l-38.84 14.135l7.178-40.703l31.662 26.568Zm-77.79 28.4l38.842-14.136l-7.179 40.705l-31.662-26.568Zm63.384 53.296L81.91 188.673l7.178-40.706l31.663 26.569Zm-31.645-26.664l7.192-40.8l38.931-14.169l31.737 26.63l-7.193 40.8l-38.93 14.17l-31.737-26.63Zm77.935-28.279l31.663 26.568l-38.841 14.137l7.178-40.705Zm-31.72-26.725l38.84-14.137l-7.178 40.705l-31.662-26.568Zm-24.616-67.492l38.93-14.17l31.737 26.63l-7.194 40.8l-38.931 14.17l-31.737-26.63l7.195-40.8ZM25.557 94.55l7.195-40.8l38.93-14.17l31.737 26.63l-7.194 40.8l-38.931 14.17l-31.737-26.63ZM42.89 202.875l-31.736-26.632l7.194-40.8l38.93-14.17l31.737 26.63l-7.194 40.801l-38.93 14.17Zm102.478 39.152l-38.931 14.17l-31.736-26.63l7.194-40.8l38.93-14.17l31.737 26.63l-7.194 40.8Zm85.147-69.172l-7.194 40.8l-38.93 14.168l-31.737-26.628l7.194-40.8l38.93-14.17l31.737 26.63Zm7.212-40.896l-38.93 14.17l-31.739-26.631l7.195-40.8l38.93-14.17l31.737 26.63l-7.193 40.801Z"></path><path fill="#649791" d="m238.177 99.233l-95.322-79.982c-4.47-3.75-5.052-10.413-1.303-14.88c3.755-4.47 10.414-5.05 14.88-1.303l95.322 79.985c4.47 3.75 5.052 10.412 1.303 14.88a10.543 10.543 0 0 1-8.096 3.772c-2.396 0-4.804-.81-6.784-2.472Z"></path><path fill="#EFC519" d="M104.947 266.809c-4.33 0-8.392-2.683-9.94-6.994c-1.974-5.488.878-11.539 6.366-13.512l118.41-42.559c5.486-1.975 11.54.877 13.513 6.367c1.973 5.489-.879 11.539-6.367 13.512l-118.41 42.56c-1.18.425-2.386.626-3.572.626Z"></path><path fill="#A21C3D" d="M11.12 188.04c-.605 0-1.214-.05-1.83-.16c-5.747-1.001-9.592-6.474-8.588-12.22L22.31 51.9c1.003-5.745 6.477-9.59 12.22-8.588c5.747 1.004 9.591 6.475 8.588 12.22L21.51 179.294c-.894 5.133-5.355 8.747-10.39 8.747Z"></path><path fill="#068CBA" d="M64.5 90.942c-.609 0-1.225-.052-1.846-.162c-5.744-1.012-9.58-6.49-8.568-12.235l7.204-40.848c1.012-5.744 6.485-9.583 12.235-8.568c5.744 1.013 9.58 6.49 8.568 12.236L74.89 82.213c-.903 5.124-5.36 8.73-10.39 8.73Z"></path><path fill="#531210" d="M42.893 213.484c-.61 0-1.225-.053-1.847-.162c-5.744-1.014-9.58-6.492-8.567-12.236l7.203-40.846c1.012-5.745 6.488-9.572 12.236-8.567c5.744 1.014 9.58 6.492 8.567 12.236l-7.203 40.846c-.903 5.124-5.36 8.729-10.39 8.729Z"></path><path fill="#509F4E" d="M142.436 62.568c-2.396 0-4.804-.81-6.784-2.471l-31.774-26.66c-4.47-3.75-5.052-10.41-1.302-14.88c3.75-4.47 10.414-5.05 14.88-1.303l31.775 26.662c4.47 3.75 5.052 10.41 1.302 14.88a10.544 10.544 0 0 1-8.097 3.772Z"></path><path fill="#106E66" d="M237.758 142.553c-2.396 0-4.804-.812-6.784-2.472l-31.775-26.661c-4.47-3.75-5.052-10.412-1.303-14.88c3.755-4.47 10.414-5.05 14.88-1.303L244.55 123.9c4.47 3.75 5.052 10.412 1.303 14.88a10.537 10.537 0 0 1-8.096 3.774Z"></path><path fill="#068CBA" d="M191.584 197.59c-4.313 0-8.364-2.665-9.925-6.951c-1.996-5.482.83-11.544 6.31-13.537l38.977-14.188c5.485-1.996 11.544.833 13.537 6.31c1.996 5.482-.83 11.545-6.31 13.537l-38.977 14.188a10.52 10.52 0 0 1-3.612.641Z"></path><path fill="#92BEAF" d="M120.828 185.111c-2.396 0-4.804-.811-6.784-2.47l-31.773-26.66c-4.468-3.752-5.05-10.413-1.301-14.88c3.751-4.47 10.414-5.047 14.88-1.303l31.773 26.661c4.47 3.752 5.052 10.413 1.303 14.88a10.538 10.538 0 0 1-8.098 3.772Z"></path><path fill="#4B635B" d="M159.82 170.927c-.608 0-1.224-.053-1.846-.162c-5.745-1.014-9.58-6.492-8.567-12.236l7.203-40.848c1.014-5.742 6.487-9.583 12.236-8.567c5.745 1.012 9.58 6.492 8.567 12.236l-7.203 40.848c-.903 5.124-5.358 8.729-10.39 8.729Z"></path><path fill="#B9BC63" d="M96.263 117.606c-4.314 0-8.365-2.664-9.926-6.952c-1.994-5.481.83-11.542 6.312-13.536l38.979-14.187c5.476-1.992 11.542.831 13.535 6.313c1.996 5.481-.831 11.542-6.313 13.536l-38.976 14.187a10.557 10.557 0 0 1-3.61.639Z"></path><path fill="#E38B25" d="M74.656 240.149a10.57 10.57 0 0 1-9.927-6.953c-1.994-5.48.831-11.542 6.313-13.535l38.976-14.188c5.482-1.998 11.544.83 13.537 6.312c1.994 5.48-.83 11.543-6.312 13.535l-38.977 14.188a10.515 10.515 0 0 1-3.61.641Z"></path></svg>

                   </div>

                   <div class="bomb" :class="columnAspect === 'trap' ? '':'hidden'">



  <svg width="1em" height="1em" viewBox="0 0 512 512"><path fill="#D0C9BF" d="M328.965 140.508a7.322 7.322 0 0 1-4.947-1.915a7.353 7.353 0 0 1-.489-10.388c16.239-17.844 36.276-29.311 57.947-33.16c17.961-3.188 36.882-1.113 53.273 5.849a7.356 7.356 0 0 1 3.894 9.643a7.356 7.356 0 0 1-9.644 3.893c-25.471-10.818-63.695-10.281-94.594 23.673a7.332 7.332 0 0 1-5.44 2.405z"></path><path fill="#384C59" d="m344.472 183.587l11.735-11.735c14.059-14.059 14.059-36.853 0-50.912l-13.455-13.455c-14.059-14.059-36.853-14.059-50.912 0l-20.097 20.097c-22.701-9.815-47.729-15.264-74.034-15.264c-103.131 0-186.735 83.604-186.735 186.735s83.604 186.735 186.735 186.735s186.735-83.604 186.735-186.735c0-43.59-14.938-83.691-39.972-115.466z"></path><path fill="#FFC145" d="M453.976 104.663c0 12.186-9.915 22.101-22.102 22.101s-22.101-9.915-22.101-22.101s9.914-22.101 22.101-22.101s22.102 9.915 22.102 22.101zm-13.768-37.258V39.952c0-4.603-3.731-8.334-8.334-8.334s-8.334 3.731-8.334 8.334v27.453a8.334 8.334 0 0 0 16.668 0zM411.422 84.21a8.333 8.333 0 0 0 0-11.786L392.01 53.012a8.334 8.334 0 0 0-11.785 11.786l19.412 19.412c1.627 1.627 3.76 2.441 5.893 2.441s4.265-.814 5.892-2.441zm-19.412 72.102l19.412-19.412a8.334 8.334 0 0 0-11.785-11.786l-19.412 19.412a8.333 8.333 0 0 0 5.893 14.227a8.306 8.306 0 0 0 5.892-2.441zm48.198 13.061V141.92c0-4.603-3.731-8.334-8.334-8.334s-8.334 3.731-8.334 8.334v27.453c0 4.603 3.731 8.334 8.334 8.334s8.334-3.731 8.334-8.334zm43.316-13.061a8.333 8.333 0 0 0 0-11.786l-19.412-19.412a8.334 8.334 0 0 0-11.785 11.786l19.412 19.412c1.627 1.627 3.76 2.441 5.893 2.441s4.265-.814 5.892-2.441zm21.395-51.649a8.334 8.334 0 0 0-8.334-8.334h-27.453c-4.603 0-8.334 3.731-8.334 8.334s3.731 8.334 8.334 8.334h27.453a8.334 8.334 0 0 0 8.334-8.334zM464.112 84.21l19.412-19.412a8.334 8.334 0 0 0-11.785-11.786l-19.412 19.412a8.333 8.333 0 0 0 5.893 14.227a8.306 8.306 0 0 0 5.892-2.441z"></path><ellipse cx="138.274" cy="186.373" fill="#80878C" rx="57" ry="35.419" transform="rotate(156.273 138.27 186.36)"></ellipse></svg>

                   </div>

                   <div class="weight" :class="columnAspect === 'weight' ? '':'hidden'">
                   
                   

  <svg width="1.25em" height="1em" viewBox="0 0 640 512"><path fill="currentColor" d="M352 176c17.7 0 32 14.3 32 32s-14.3 32-32 32h-32.9v208H368c5.4 0 10.8-.5 16-1.3V480c0 10.1 2.7 21.3 7.6 30.3c-7.7 1.1-15.6 1.7-23.6 1.7H208c-88.4 0-160-71.6-160-160v-6.1l-7.03 6.2c-9.37 10.2-24.57 10.2-33.941 0c-9.372-8.5-9.372-23.7 0-33.1l56.001-56c9.37-9.3 24.57-9.3 33.94 0l55.13 56c10.2 9.4 10.2 24.6 0 33.1c-8.5 10.2-23.7 10.2-33.1 0l-7-6.2v6.1c0 53 42.1 96 96 96h48V240h-32c-17.7 0-32-14.3-32-32s14.3-32 32-32h10.9C209 158.8 192 129.4 192 96c0-53.02 42.1-96 96-96c53 0 96 42.98 96 96c0 33.4-17.9 62.8-42.9 80H352zm-64.9-48c18.6 0 32-14.3 32-32c0-17.67-13.4-32-32-32c-16.8 0-32 14.33-32 32c0 17.7 15.2 32 32 32zM528 192c44.2 0 80 35.8 80 80v48c17.7 0 32 14.3 32 32v128c0 17.7-14.3 32-32 32H448c-17.7 0-32-14.3-32-32V352c0-17.7 14.3-32 32-32v-48c0-44.2 35.8-80 80-80zm0 48c-17.7 0-32 14.3-32 32v48h64v-48c0-17.7-14.3-32-32-32z"></path></svg>

                   </div>

                  </td>
</template>

<style scoped>

.wall{
     background-color: black;
      
  animation-name: roundToSquare;
  animation-duration: 0.5s;
}
.column-element{
 padding: 0.75rem 0.75rem;
}

/* .start{
  display: flex;
 padding: 0 0;
}
.start:after{
  display: flex;
  pointer-events: none;
 
 content: '\2693';


} */
.void{
  background-color: blue;
}

@keyframes roundToSquare {
  0%   {
    transform: scale(0.3);
    background-color: rgb(210, 195, 195);}

  50%  {
     transform: scale(1.2);
    background-color: rgb(89, 89, 98);}
  100% {
    transform: scale(1.0);
    background-color: rgb(7, 15, 7);}
}

</style>